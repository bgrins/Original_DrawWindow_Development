<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Canvas text animation example</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    
    <!--[if lt IE 9]><script type="text/javascript" src="../flashcanvaspro/flashcanvasstrict.js"></script><![endif]-->
	</head>
	<body>
    <h1>Canvas text animation example</h1>
    
		<canvas width="500" height="300" id="test-canvas"></canvas>
		
		<script type="text/javascript">
		
// html5shiv MIT @rem remysharp.com/html5-enabling-script
// iepp v1.6.2 MIT @jon_neal iecss.com/print-protector
/*@cc_on(function(m,c){var z="abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video";function n(d){for(var a=-1;++a<o;)d.createElement(i[a])}function p(d,a){for(var e=-1,b=d.length,j,q=[];++e<b;){j=d[e];if((a=j.media||a)!="screen")q.push(p(j.imports,a),j.cssText)}return q.join("")}var g=c.createElement("div");g.innerHTML="<z>i</z>";if(g.childNodes.length!==1){var i=z.split("|"),o=i.length,s=RegExp("(^|\\s)("+z+")",
"gi"),t=RegExp("<(/*)("+z+")","gi"),u=RegExp("(^|[^\\n]*?\\s)("+z+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),r=c.createDocumentFragment(),k=c.documentElement;g=k.firstChild;var h=c.createElement("body"),l=c.createElement("style"),f;n(c);n(r);g.insertBefore(l,
g.firstChild);l.media="print";m.attachEvent("onbeforeprint",function(){var d=-1,a=p(c.styleSheets,"all"),e=[],b;for(f=f||c.body;(b=u.exec(a))!=null;)e.push((b[1]+b[2]+b[3]).replace(s,"$1.iepp_$2")+b[4]);for(l.styleSheet.cssText=e.join("\n");++d<o;){a=c.getElementsByTagName(i[d]);e=a.length;for(b=-1;++b<e;)if(a[b].className.indexOf("iepp_")<0)a[b].className+=" iepp_"+i[d]}r.appendChild(f);k.appendChild(h);h.className=f.className;h.innerHTML=f.innerHTML.replace(t,"<$1font")});m.attachEvent("onafterprint",
function(){h.innerHTML="";k.removeChild(h);k.appendChild(f);l.styleSheet.cssText=""})}})(this,document);@*/

      function initCanvas(canvas) {
        if (typeof FlashCanvas != "undefined") {
          FlashCanvas.initElement(canvas);
        }
        return canvas;
      }
      
			window.onload = function(){
		  	var canvas = initCanvas(document.createElement("canvas"));
		  	var canvas2 = initCanvas(document.createElement("canvas"));
		  	//var canvas = initCanvas(document.getElementById("test-canvas"));
				    canvas.width = canvas2.width = 500;
				    canvas.height = canvas2.height = 300;
			document.body.appendChild(canvas);
			document.body.appendChild(canvas2);
			var ctx = canvas.getContext('2d');
		  	ctx.font = "3em Optimer";
        ctx.textAlign = 'center';

		  	var i, n = 0, 
            components = [0, 0, 0], 
            operations = [1, 2, 3];
            
		  	function draw(){
          ctx.clearRect(0, 0, 500, 300);
          ctx.fillStyle = "rgb("+components.join(',')+")";
          ctx.textBaseline = 'top';
          
          // Jumping text
          ctx.save();
            ctx.translate(250, 0);
  		  		ctx.fillText('Lorem ipsum dolor sit amet', 0, components[1]);
          ctx.restore();
          
          // Rotating text
          ctx.save();
            ctx.translate(250, 150);
            ctx.rotate(0.01*n++);
            ctx.fillStyle = '#000';
            ctx.textBaseline = 'middle';
            ctx.fillText('Lorem ipsum dolor sit amet', 0, 0);
          ctx.restore();
          
          for(i = 0; i < 3; i++) {
            components[i] += operations[i];
            if ((components[i] >= 256) || (components[i] <= 0)) operations[i] *= -1;
          }
          
					/*if (n < 1000)*/ setTimeout(draw, 10);
		  	}
		    draw();
          canvas2.width = canvas2.width;
          canvas2.getContext("2d").drawImage(canvas, 0, 0);
			}
		</script>
    
    <a href="index.html" class="footer">Back to the index</a>
	</body>
</html>
